(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{638:function(t,s,a){"use strict";a.r(s);var n=a(5),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/lemonnuu/PicGoPictureBed/markdown/webpack/0004-webpack%E5%AE%98%E7%BD%91%E5%9B%BE.png",alt:"0004-webpack官网图"}})]),t._v(" "),a("p",[t._v("渐进式网络应用程序(progressive web application - PWA), 是一种可以提供类似于 native app(原生应用程序)体验的 web app(网络应用程序)。")]),t._v(" "),a("p",[t._v("PWA 可以用来做很多事。")]),t._v(" "),a("p",[t._v("其中最重要的是, 在 offline(离线) 时应用程序还能够继续运行功能。")]),t._v(" "),a("p",[t._v("这是通过名为 Service Workers 的 web 技术来实现的。")]),t._v(" "),a("p",[t._v("在 webpack 中, 可以使用名为 Workbox 的 Google 项目来为应用程序添加离线体验。")]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("http-server")]),t._v(" package 来搭建一个 service。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" http-server -D\n")])])]),a("p",[t._v("package.json")]),t._v(" "),a("div",{staticClass:"language-diff extra-class"},[a("pre",{pre:!0,attrs:{class:"language-diff"}},[a("code",[a("span",{pre:!0,attrs:{class:"token unchanged"}},[a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[t._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[t._v(" {\n")]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[t._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[t._v('   "scripts": {\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[t._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[t._v('     "build": "webpack",\n')])]),a("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[a("span",{pre:!0,attrs:{class:"token prefix inserted"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token line"}},[t._v('     "start": "http-server dist"\n')])]),a("span",{pre:!0,attrs:{class:"token unchanged"}},[a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[t._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[t._v("   },\n")]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[t._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[t._v("   ...\n")]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[t._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[t._v(" }\n")])])])])]),a("p",[t._v("先运行 "),a("code",[t._v("npm run build")]),t._v(" 命令构建项目, 然后运行命令 "),a("code",[t._v("npm start")]),t._v("。")]),t._v(" "),a("p",[t._v("当打开浏览器应该会看到 webpack 应用程序被 serve 到 "),a("code",[t._v("dist")]),t._v(" 目录。如果停止 server 然后刷新, 则 webpack 应用程序将不能再被访问。")]),t._v(" "),a("h2",{attrs:{id:"添加workbox"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加workbox"}},[t._v("#")]),t._v(" 添加Workbox")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" workbox-webpack-plugin -D\n")])])]),a("p",[t._v("搓达西, 打包报错")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("PS C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("an"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'an'")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s\\Desktop\\test> npx webpack\nC:\\Users\\an'")]),t._v("an"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),t._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Desktop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("node_modules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("lib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("DefaultStatsPrinterPlugin.js:1219\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message.includes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\u001b"}},[t._v("\\u001b")]),t._v('["')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("))")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                            ^\n\nTypeError: message.includes is not a "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v("\n    at Object.formatError "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("an"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'an'")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s\\Desktop\\test\\node_modules\\webpack\\lib\\stats\\DefaultStatsPrinterPlugin.js:1219:15)\n    at context.<computed> (C:\\Users\\an'")]),t._v("an"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),t._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Desktop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("node_modules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("lib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("DefaultStatsPrinterPlugin.js:1323:35"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at Object.error.details "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("an"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'an'")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s\\Desktop\\test\\node_modules\\webpack\\lib\\stats\\DefaultStatsPrinterPlugin.js:591:49)\n    at C:\\Users\\an'")]),t._v("an"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),t._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Desktop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("node_modules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("lib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("DefaultStatsPrinterPlugin.js:1332:29\n    at Hook.eval "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("as call"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eval at create "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("an"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'an'")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s\\Desktop\\test\\node_modules\\tapable\\lib\\HookCodeFactory.js:19:10), <anonymous>:7:16)\n    at Hook.CALL_DELEGATE [as _call] (C:\\Users\\an'")]),t._v("an"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),t._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Desktop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("node_modules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("tapable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("lib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Hook.js:14:14"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("an"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'an'")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s\\Desktop\\test\\node_modules\\webpack\\lib\\stats\\StatsPrinter.js:183:9\n    at StatsPrinter._forEachLevel (C:\\Users\\an'")]),t._v("an"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),t._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Desktop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("node_modules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("lib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("StatsPrinter.js:126:19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at StatsPrinter._print "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("an"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'an'")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s\\Desktop\\test\\node_modules\\webpack\\lib\\stats\\StatsPrinter.js:182:26)\n    at StatsPrinter.print (C:\\Users\\an'")]),t._v("an"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),t._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Desktop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("node_modules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("lib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("StatsPrinter.js:156:16"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"注册-service-worker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册-service-worker"}},[t._v("#")]),t._v(" 注册 Service Worker")])])}),[],!1,null,null,null);s.default=e.exports}}]);